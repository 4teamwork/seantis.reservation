<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="seantis.reservation"
      tal:omit-tag="">
  <head>
  </head>

  <body>

    <tal:comment replace="nothing">
    Common report controlbox. 

    Requires the presence of seantis.reservation.reports.GeneralReportParametersMixin
    in the view object.
    </tal:comment>

    <metal:define define-macro="controlbox">
      <div class="controlbox">
          <div class="monthly-report-navigation">
              <tal:comment replace="nothing">
                Report specific nav-block entries
              </tal:comment>
              <metal:report-specific-nav-blocks define-slot="report-specific-nav-blocks">
              </metal:report-specific-nav-blocks>

              <tal:comment replace="nothing">
                Common nav-block entries
              </tal:comment>
              <div class="nav-block">
                  <h2 i18n:translate="">Details</h2>
                  <label><input type="radio" name="details" value="show" tal:attributes="checked view/show_details | nothing" /><span i18n:translate="">Show</span></label>
                  <label><input type="radio" name="details" value="hide" tal:attributes="checked not: view/show_details | nothing" /><span i18n:translate="">Hide</span></label>
              </div>
              <div class="nav-block">
                  <h2 i18n:translate="">Resources</h2>
                  <tal:block repeat="uuid view/sorted_resources">
                      <label><input type="checkbox" class="resource-checkbox" tal:attributes="value uuid; checked python: view.show_resource(uuid) or None"><span tal:content="python: view.resource_title(uuid)"></span></label>
                  </tal:block>
              </div>
              <div class="nav-block">
                  <h2 i18n:translate="">Statuses</h2>
                  <tal:block repeat="status view/statuses">
                      <label><input type="checkbox" class="status-checkbox" tal:attributes="value python: status[0]; checked python: view.show_status(status[0]) or None"><span tal:content="python: status[1]"></span></label>
                  </tal:block>
              </div>

              <div style="clear: both;"></div>
          </div>
        </div>
    </metal:define>

    <tal:comment replace="nothing">
    Reservation data block. Needs the following variables:

    context -> the resource the reservation belongs to
    token -> token of the reservation
    data -> reservation data to display
    show_actions -> displays links leading to different actions (default False)

    </tal:comment>

    <metal:define define-macro="reservation-data" tal:define="macro python: context.unrestrictedTraverse('@@seantis-reservation-macros')">
      <div class="reservation-data" tal:condition="data">

        <tal:block tal:condition="data" tal:repeat="key python: macro.sort_reservation_data(data)">
          <tal:block tal:define="interface python: data[key]">
            <div class="block-title" tal:content="python: interface['desc']"></div>
            
            <div tal:repeat="value python: macro.sort_reservation_data_values(interface['values'])">
              <span class="label" tal:content="python: value['desc']"></span>
              <span tal:content="python: macro.display_reservation_data(value['value'])"></span>
            </div>
          
          </tal:block>
        </tal:block>

        <a tal:condition="show_actions | nothing" tal:attributes="href python: macro.update_all_url(token, context)"
           class="reservation-data-update" i18n:translate="">
           &raquo; Edit Formdata
        </a>
      </div>
    </metal:define>
  </body>
</html>