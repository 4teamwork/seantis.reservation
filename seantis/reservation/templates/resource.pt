<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"

      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="seantis.reservation"

      xml:lang="en" lang="en">

<body>

<metal:block fill-slot="javascript_head_slot">
    <tal:block replace="structure view/javascript" />
</metal:block>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

        <div tal:replace="structure provider:plone.abovecontenttitle" />
        <div tal:replace="structure provider:plone.belowcontenttitle" />
        <div tal:replace="structure provider:plone.abovecontentbody" />

        <div class="documentContent" 
            tal:define="multicalendar python: view.calendar_count == 1"
            tal:attributes="class python: view.calendar_count == 1 and 'singlecalendar' or 'multicalendar'">

            <!-- single calendar -->
            <tal:block 
                condition="multicalendar" 
                repeat="resource view/resources">
                
                <div tal:define="
                    title       python: view.title(resource);
                    description resource/description;
                    calendar_id resource/calendar_id;
                    ">

                    <h1 tal:content="title" class="documentFirstHeading"></h1>
                    <p tal:content="description" />
                    <div tal:attributes="id calendar_id"></div>

                    <div class="legend">
                        <div class="icon-fully-booked">
                            <tal:block i18n:translate="">Fully booked</tal:block>
                        </div>
                        
                        <div class="icon-full-waitinglist">
                            <tal:block i18n:translate="">Full waitinglist</tal:block>
                        </div>
                    </div>

                    <div style="clear: both;"></div>
                </div>
            </tal:block>

            <!-- multiple calendar comparison -->
            <tal:block 
                condition="not: multicalendar" 
                repeat="resource view/resources">
                
                <div class="multiCalendarContainer" tal:define="
                    title       python: view.title(resource);
                    calendar_id resource/calendar_id;
                    ">

                    <h1 tal:content="title" class="documentFirstHeading"></h1>
                    <div tal:attributes="id calendar_id"></div>

                    <div class="legend">
                        <div class="icon-fully-booked">
                            <tal:block i18n:translate="">Fully booked</tal:block>
                        </div>
                        
                        <div class="icon-full-waitinglist">
                            <tal:block i18n:translate="">Full waitinglist</tal:block>
                        </div>
                    </div>

                    <div style="clear: both;"></div>
                </div>

                <div tal:condition="repeat/resource/odd" style="clear: both;"></div>
            </tal:block>
        </div>

        <div style="clear: both"></div>

        <div id="inline-page">
        </div>

        <div tal:replace="structure provider:seantis.reservation.overviewletmanager"/>

        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>

</html>